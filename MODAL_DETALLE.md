# üìÑ Modal de Detalle del Manual - Documentaci√≥n

## Descripci√≥n

Pantalla modal que se abre al tocar un manual, simulando un visor de PDF con:

- **Header** con informaci√≥n del manual
- **Visor simulado** con mensaje de carga
- **Botones** de cerrar y favorito
- **Informaci√≥n adicional** del documento

## üé® Dise√±o Visual

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚úï                            ‚≠ê   ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ  Polipasto El√©ctrico Yale CPV       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
‚îÇ  ‚îÇ Yale ‚îÇ ‚îÇ‚ö°El√©ctrico‚îÇ            ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                     ‚îÇ
‚îÇ           üìÑ                        ‚îÇ
‚îÇ      (icono de PDF)                 ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ          ‚è≥                         ‚îÇ
‚îÇ    (spinner de carga)               ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ   Cargando Visor de PDF...          ‚îÇ
‚îÇ   Preparando el documento           ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ ‚ÑπÔ∏è Informaci√≥n           ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ Formato: PDF             ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ Tama√±o: ~2.5 MB          ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ P√°ginas: ~15 p√°ginas     ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ      [Descargar PDF üì•]            ‚îÇ
‚îÇ                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üéØ Caracter√≠sticas

‚úÖ **Navegaci√≥n con Par√°metros** - Recibe ID del manual  
‚úÖ **Header Informativo** - T√≠tulo, marca y tipo  
‚úÖ **Bot√≥n de Cerrar** - Vuelve a la pantalla anterior  
‚úÖ **Bot√≥n de Favorito** - Toggle de favorito  
‚úÖ **Visor Simulado** - Icono de PDF + spinner  
‚úÖ **Mensaje de Carga** - "Cargando Visor de PDF..."  
‚úÖ **Informaci√≥n del Documento** - Formato, tama√±o, p√°ginas  
‚úÖ **Bot√≥n de Descarga** - Acci√≥n alternativa  
‚úÖ **Tema Din√°mico** - Colores adaptativos

## üìÅ Archivo

**`app/modal.tsx`** - Pantalla modal de detalle

## üöÄ Navegaci√≥n

### Desde Cat√°logo

```tsx
import { useRouter } from "expo-router";

function CatalogoScreen() {
  const router = useRouter();

  const handleManualPress = (manual: Manual) => {
    router.push(`/modal?id=${manual.id}`);
  };

  return (
    <ManualCard manual={manual} onPress={() => handleManualPress(manual)} />
  );
}
```

### Desde Favoritos

```tsx
import { useRouter } from "expo-router";

function FavoritosScreen() {
  const router = useRouter();

  const handleManualPress = (manual: Manual) => {
    router.push(`/modal?id=${manual.id}`);
  };

  return (
    <ManualCard manual={manual} onPress={() => handleManualPress(manual)} />
  );
}
```

## üìã Par√°metros

### URL

```
/modal?id=1
```

### Obtener Par√°metros

```tsx
import { useLocalSearchParams } from "expo-router";

const params = useLocalSearchParams();
const manualId = params.id ? parseInt(params.id as string) : null;
```

### Obtener Manual

```tsx
import { obtenerManualPorId } from "@/constants/Manuales";

const manual = manualId ? obtenerManualPorId(manualId) : null;
```

## üé® Componentes del Modal

### 1. Header

```tsx
<View style={{ backgroundColor: colors.card }}>
  {/* Bot√≥n de cerrar */}
  <TouchableOpacity onPress={() => router.back()}>
    <FontAwesome name="times" />
  </TouchableOpacity>

  {/* Bot√≥n de favorito */}
  <TouchableOpacity onPress={() => toggleFavorito(manual.id)}>
    <FontAwesome name={isFavorito ? "star" : "star-o"} />
  </TouchableOpacity>

  {/* Informaci√≥n del manual */}
  <Text>{manual.titulo}</Text>

  {/* Badges */}
  <View>{/* Marca y Tipo */}</View>
</View>
```

### 2. Visor Simulado

```tsx
<View className="flex-1 items-center justify-center">
  {/* Icono de PDF */}
  <View>
    <FontAwesome name="file-pdf-o" size={48} color={colors.primary} />
  </View>

  {/* Spinner de carga */}
  <ActivityIndicator size="large" color={colors.primary} />

  {/* Mensaje */}
  <Text>Cargando Visor de PDF...</Text>
  <Text>Preparando el documento para visualizaci√≥n</Text>
</View>
```

### 3. Informaci√≥n del Documento

```tsx
<View style={{ backgroundColor: colors.backgroundSecondary }}>
  <View className="flex-row items-center">
    <FontAwesome name="info-circle" />
    <Text>Informaci√≥n del Documento</Text>
  </View>

  <View>
    <Text>Formato: PDF</Text>
    <Text>Tama√±o: ~2.5 MB</Text>
    <Text>P√°ginas: ~15 p√°ginas</Text>
  </View>
</View>
```

### 4. Bot√≥n de Descarga

```tsx
<TouchableOpacity style={{ backgroundColor: colors.primary }}>
  <FontAwesome name="download" />
  <Text>Descargar PDF</Text>
</TouchableOpacity>
```

## üí° Estados

### Manual Encontrado

- Muestra header con informaci√≥n
- Muestra visor simulado
- Muestra botones de acci√≥n

### Manual No Encontrado

- Muestra icono de error
- Muestra mensaje "Manual no encontrado"
- No muestra bot√≥n de favorito

## üé® Colores por Marca

```typescript
const getMarcaColor = (marca: string) => {
  const colores: Record<string, string> = {
    Yale: "#DC2626", // Rojo
    Jet: "#2563EB", // Azul
    Harrington: "#059669", // Verde
  };
  return colores[marca] || colors.primary;
};
```

## üîÑ Integraci√≥n con Favoritos

```tsx
import { useFavoritos } from "@/contexts/FavoritosContext";

const { toggleFavorito, esFavorito } = useFavoritos();
const isFavorito = manualId ? esFavorito(manualId) : false;

// Bot√≥n de favorito
<TouchableOpacity onPress={() => toggleFavorito(manual.id)}>
  <FontAwesome
    name={isFavorito ? "star" : "star-o"}
    color={isFavorito ? "#FFFFFF" : colors.primary}
  />
</TouchableOpacity>;
```

## üì± Navegaci√≥n

### Abrir Modal

```tsx
// Desde cualquier pantalla
router.push(`/modal?id=${manual.id}`);
```

### Cerrar Modal

```tsx
// Bot√≥n de cerrar
router.back();

// O program√°ticamente
router.dismiss();
```

## üéØ Ejemplo Completo

```tsx
import { useRouter } from "expo-router";
import { obtenerTodosManuales } from "@/constants/Manuales";

function MiPantalla() {
  const router = useRouter();
  const manuales = obtenerTodosManuales();

  return (
    <FlatList
      data={manuales}
      renderItem={({ item }) => (
        <ManualCard
          manual={item}
          onPress={() => router.push(`/modal?id=${item.id}`)}
        />
      )}
    />
  );
}
```

## üîß Personalizaci√≥n

### Cambiar Mensaje de Carga

```tsx
// En modal.tsx
<Text>Cargando Visor de PDF...</Text>
// Cambiar a:
<Text>Abriendo documento...</Text>
```

### Cambiar Informaci√≥n del Documento

```tsx
// Agregar m√°s campos
<View>
  <Text>Formato: PDF</Text>
  <Text>Tama√±o: ~2.5 MB</Text>
  <Text>P√°ginas: ~15 p√°ginas</Text>
  <Text>Idioma: Espa√±ol</Text>
  <Text>Versi√≥n: 1.0</Text>
</View>
```

### Agregar Visor Real de PDF

```tsx
// Instalar: expo install react-native-pdf
import Pdf from "react-native-pdf";

<Pdf
  source={{ uri: manual.url_falsa_pdf }}
  style={{ flex: 1 }}
  onLoadComplete={(numberOfPages) => {
    console.log(`P√°ginas: ${numberOfPages}`);
  }}
/>;
```

## üé® Animaciones (Opcional)

### Fade In del Contenido

```tsx
import { Animated } from "react-native";

const fadeAnim = useRef(new Animated.Value(0)).current;

useEffect(() => {
  Animated.timing(fadeAnim, {
    toValue: 1,
    duration: 300,
    useNativeDriver: true,
  }).start();
}, []);

<Animated.View style={{ opacity: fadeAnim }}>{/* Contenido */}</Animated.View>;
```

### Spinner Rotatorio

```tsx
// ActivityIndicator ya tiene animaci√≥n por defecto
<ActivityIndicator size="large" color={colors.primary} animating={true} />
```

## üìä Flujo de Usuario

```
1. Usuario toca tarjeta de manual
   ‚Üì
2. Navega a /modal?id=X
   ‚Üì
3. Modal obtiene ID de par√°metros
   ‚Üì
4. Busca manual por ID
   ‚Üì
5. Muestra informaci√≥n y visor simulado
   ‚Üì
6. Usuario puede:
   - Cerrar modal (volver)
   - Agregar/quitar favorito
   - Descargar PDF
```

## üéØ Mejores Pr√°cticas

1. **Validar ID** - Verificar que el ID existe
2. **Manejar errores** - Mostrar mensaje si no se encuentra
3. **Bot√≥n de cerrar** - Siempre visible y accesible
4. **Estado de carga** - Indicar que algo est√° pasando
5. **Informaci√≥n √∫til** - Mostrar detalles relevantes

## üêõ Manejo de Errores

### ID Inv√°lido

```tsx
if (!manualId) {
  return (
    <View>
      <Text>ID de manual inv√°lido</Text>
      <TouchableOpacity onPress={() => router.back()}>
        <Text>Volver</Text>
      </TouchableOpacity>
    </View>
  );
}
```

### Manual No Encontrado

```tsx
if (!manual) {
  return (
    <View>
      <FontAwesome name="exclamation-circle" size={64} />
      <Text>Manual no encontrado</Text>
      <TouchableOpacity onPress={() => router.back()}>
        <Text>Volver</Text>
      </TouchableOpacity>
    </View>
  );
}
```

---

## üéØ Resumen

‚úÖ **Modal Funcional** - Se abre al tocar manual  
‚úÖ **Navegaci√≥n con Par√°metros** - Pasa ID del manual  
‚úÖ **Header Informativo** - T√≠tulo, marca, tipo  
‚úÖ **Botones de Acci√≥n** - Cerrar y favorito  
‚úÖ **Visor Simulado** - Icono + spinner + mensaje  
‚úÖ **Informaci√≥n del Documento** - Formato, tama√±o, p√°ginas  
‚úÖ **Tema Din√°mico** - Colores adaptativos  
‚úÖ **Manejo de Errores** - Manual no encontrado

¬°El modal de detalle est√° completamente implementado! üìÑ‚ú®
